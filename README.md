# Example: Using yProv4SQA with the iTwinAI Repository

In this example, we demonstrate how to use our library by analyzing the the [iTwinAI GitHub repository](https://github.com/interTwin-eu/itwinai).  

This repository already utilizes SQAaaS and contains existing assessments. We will use it to  Showcase the capabilities of our library and Extract insights related to software quality and provenance.

## **Clone the repository and navigate to the directory:**
   ```bash
   git clone https://github.com/username/yProv4SQA.git
   cd yProv4SQA
   ```

## **Setup the environment and install dependencies:**

### 1. Create and activate a virtual environment (recommended)

   ```bash
   # Create a virtual environment
   python -m venv yProv4SQA_venv

   # Activate the virtual environment
   source yProv4SQA_venv/bin/activate

   ```
This ensures that all dependencies are installed in an isolated environment, preventing conflicts with other Python packages on your system.

### **2. Install the library and required dependencies:**
   ```bash
   pip install -e .
   pip install requests
   ```
This installs the library and also installs the requests library, which is required to run the examples.

## **Fetch SQA reports:**
   ```bash
   fetch-sqa-reports itwinai
   ```
This command fetches all SQAaaS assessments for the `itwinai` repository from the [EOSC-Synergy GitHub space](https://github.com/EOSC-synergy). The library then downloads all available reports, removes duplicates and outdated versions, and produces a final cleaned folder used to generate the provenance document. For this example, the output folder will be created as `./itwinai_SQAaaS_reports`.


## **Generate provenance documents:**
   ```bash
   process-provenance ./itwinai_SQAaaS_reports
   ```
This command generates a provenance document using the yProv model based on the W3C PROV-DM standard.
It will produce a .json file named prov_output.json, which can be further used for exploration and analysis.


## **Compare two assessments:**
   ```bash
   compare ./provenance.json 59 87
   ```

## **Exploration of Provenance graph**

We provide several tools to visualize and analyze the generated provenance document.
### 1. Using the PROV Library
This PROV library can be used to check the PROV syntax, convert the provenance document into an SVG graph for standard visualization, and ensure compliance with the W3C PROV standard.

**Command:**
   ```bash
   json2graph.py prov_output.json
   ```
This will generate an .SVG graph representing the provenance.
The result of this command can be found in the folder: ./results/Complete Provenance graph.
Fig. 4 in the paper shows an example of the visualization generated by this command.
